<!DOCTYPE html>
<html lang="en">

<!-- design from Rutilanttechnology.com-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Title -->
    <title>ShineMoon | Restaurant Website</title>
    

    <!-- Font-Awesome (CSS) -->
    <link rel="stylesheet" href="static/css/all.css">

    <!-- Swiper (CSS) -->
    <link rel="stylesheet" href="static/css/swiper.css">
    
    <!-- Magnific-Popup (CSS) -->
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    
    <!-- Custom Stylesheets -->
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/responsive.css">
</head>
<body>
    <!-- Scroll-Top Area (Start) -->
    <a href="#home" class="scroll-top">
        <i class="fas fa-angle-up"></i>
    </a>
    <!-- Scroll-Top Area (End) -->
    
    <!-- Header Area (Start) -->
    <header class="header">
        <div id="menu-btn" class="fas fa-bars"></div>
        <!-- Logo -->
        <a class="logo" href="#home">
            <img src="static/picture/logo.png" alt="logo" style="width: 200px;">
        </a>
        <nav class="navbar">
            <a href="#home">Home</a>
            <a href="#about">About</a>
            <a href="#menu-gallery">Menu</a>
        </nav>
        <a href="#book" class="booking-btn">Book Table</a>
    </header>
    <!-- Header Area (End) -->
    
    <!-- Home Area (Start) -->
    <section class="home" id="home">
        <div class="swiper-container home-slider">
            <div class="swiper-wrapper">
                <div class="swiper-slide home-item">
                    <img src="static/picture/4.jpeg" alt="">
                    <div class="content">
                        <div class="text">
                            <h2>ShineMoon Sea Restaurant</h2>
                            <p>We provide you best food in our restaurant and cool atmosphere.</p>
                            <a href="#menu-gallery" class="btn">Menu</a>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide home-item">
                    <img src="static/picture/6.jpeg" alt="">
                    <div class="content">
                        <div class="text">
                            <h2>ShineMoon City Restaurant</h2>
                            <p>We provide to our customer best service in food and cleaning.</p>
                            <a href="#menu-gallery" class="btn">Menu</a>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide home-item">
                    <img src="static/picture/5.jpeg" alt="">
                    <div class="content">
                        <div class="text">
                            <h2>ShineMoon Dinner Restaurant</h2>
                            <p>We provide some discounts of our special customers.</p>
                            <a href="#menu-gallery" class="btn">Menu</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-pagination swiper-pagination2"></div>
        </div>
    </section>
    <!-- Home Area (End) -->

  <!-- About Area (Start) -->
  <section class="about" id="about">

    <div class="box-container">

      <div class="image">
        <h4>Best Award Years of the experience</h4>
        <img src="static/picture/1.jpeg" alt="">
      </div>

      <div class="content">
        <h1>ShineMoon Welcomes to You</h1>
        <p>We are here from last 10 years to run our business and provide best services to our customers.
           We have 40+ experince team and run business in 10+ countries.We are here from last 10 years to run our business and provide best services to our customers.</p>
        <p>We are here from last 10 years to run our business and provide best services to our customers.
           We have 40+ experince team and run business in 10+ countries.We are here from last 10 years to run our business and provide best services to our customers.</p>

        <a href="#" class="btn">Menu</a>
        
        <div class="about-info">

          <div class="info-box">
            <i class="fas fa-award"></i>
            <h4 class="count">15+</h4>
            <h5>Awards</h5>
          </div>

          <div class="info-box">
            <i class="fas fa-building"></i>
            <h4 class="count">10+</h4>
            <h5>Country</h5>
          </div>

          <div class="info-box info-margin">
            <i class="fas fa-users"></i>
            <h4 class="count">40+</h4>
            <h5>Team</h5>
          </div>
  
        </div> 

      </div>

    </div>

  </section>
  <!-- About Area (End) -->


  <!-- Menu Area (Start) -->
  <section class="menu" id="menu-gallery">

    <div class="heading">
        <h2><span>Menu</span></h2>
    </div>

    <div class="content">
        <div class="box-container">
          <div class="menu-gallery active" id="Starters">
            <div class="menu-item" id="myorder">
              <img src="static/picture/11.jpg" alt="">
              <div class="content">
                <div class="intro">
                  <h3>ysy的小酒馆</h3>
                  <div class="price">
                      <button type="button" class="btn btn-primary" v-on:click="insert_show()">新增</button>
                  </div>
                </div>
                <div class="text" id="myorder">
                    <table class="table" style="width:100%;">
                        <thead>
                            <tr class="tou">
                                <th>名称</th>
                                <th>单价</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tfoot v-show="show_flag==true">
                            <tr>
                                <th>
                                    <input type="text" v-model="dish.name"/>
                                </th>
                                <th>
                                    <input type="text" v-model="dish.price"/>
                                  </th>
                                <th style="text-align:right">
                                    <button type="button" class="btn btn-primary" v-on:click="insert_dish()">提交</button>
                                </th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <tr v-for="dish in dishes" style="text-align:center">
                                <td>
                                    <span  v-show="update_flag==false">{{dish.name}}</span>
                                    <span><input type="text" v-show="update_flag==true" v-model="dish.name" /></span>
                                </td>
                                <td >
                                    <span v-show="update_flag==false">{{dish.price/100}}</span>
                                    <span><input type="text" v-show="update_flag==true" v-model="dish.price" /></span>
                                </td>
                                
                                <td>
                                    <button type="button" class="btn btn-primary" v-show="update_flag==false" v-on:click="update_dishes">修改</button>
                                    <button type="button" class="btn btn-primary" v-show="update_flag==true" v-on:click="update_dish(dish.id)">提交</button>
                                    <button type="button" class="btn btn-primary" v-on:click="delete_dish(dish.id)">删除</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
  </section>


  <!-- Footer Area (Start) -->
  <footer class="footer">

    <div class="box-container">

      <div class="footer-item">
        <h2>Contact info</h2>
        <div class="info">
            <p><i class="phone fas fa-phone"></i><span>+111-222-333</span></p>
            <p><i class="envelope fas fa-envelope"></i><span class="gmail">Shinemoon@xyz.com</span></p>
            <p><i class="address fas fa-map-marker-alt"></i><span>London, UK</span></p>
        </div>
        <div class="social">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>

      <div class="footer-item">
        <h2>Opening hours</h2>
        <div class="timing">
          <h3>Monday - Saturday</h3>
          <p>11:00 AM - 11:00 PM</p>
          <p>11:00 AM - 11:00 PM</p>
          <p>11:00 AM - 11:00 PM</p>
          <p>11:00 AM - 11:00 PM</p>
          <p>11:00 AM - 11:00 PM</p>
          <p>11:00 AM - 11:00 PM</p>
        </div>
      </div>

      <div class="footer-item">
        <h2>Quick links</h2>
        <div class="links">
          <a href="#home"><i class="fas fa-arrow-right"></i>Home</a>
          <a href="#about"><i class="fas fa-arrow-right"></i>About</a>
          <a href="#menu-gallery"><i class="fas fa-arrow-right"></i>Menu</a>
          <a href="#gallery"><i class="fas fa-arrow-right"></i>Gallery</a>
          <a href="#team"><i class="fas fa-arrow-right"></i>Team</a>
          <a href="#testimonials"><i class="fas fa-arrow-right"></i>Testimonials</a>
          <a href="#contact"><i class="fas fa-arrow-right"></i>Contact</a> 
        </div>
      </div>
      
      <div class="footer-item">
        <h2>Quick links</h2>
        <div class="links">
          <a href="#menu-gallery"><i class="fas fa-arrow-right"></i>Breakfast</a>
          <a href="#menu-gallery"><i class="fas fa-arrow-right"></i>Desserts</a>
          <a href="#menu-gallery"><i class="fas fa-arrow-right"></i>Drinks</a>
          <a href="#gallery"><i class="fas fa-arrow-right"></i>Breakfast</a>
          <a href="#gallery"><i class="fas fa-arrow-right"></i>Salads</a>
          <a href="#gallery"><i class="fas fa-arrow-right"></i>Starters</a>
        </div>
      </div>

    </div>

    <div class="content">
      <p>@www.halooysy@163.com<a target="_blank" href="https://www.baidu.com">联系我</a></p>
    </div>

  </footer>
  <!-- Footer Area (End) -->
  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script>
        var myorder = new Vue({
            el: '#myorder',
            data: {
                dishes: [],
                update_flag: false,
                show_flag: false,
                dish: {
                    name: "",
                    price:0
                }
            },
            methods: {
                get_total:function()
                {
                    var total = 0;
                    for(i=0; i<this.dishes.length; i++)
                    {
                        if(this.dishes[i].selected)
                        {
                            total += (this.dishes[i].price / 100);
                        }
                    }
                    return total;
                },
                insert_order:function()
                {
                    var order = 
                        {
                            dishes:[]
                        }
                    for(i=0; i<this.dishes.length; i++)
                    {
                        if (this.dishes[i].selected)
                        {
                            order.dishes.push(this.dishes[i].id);
                        }
                    }
                    //ajax-其实就是一个http客户端
                    $.ajax({
                        url: "/order",
                        type: "post",
                        data: JSON.stringify(order),
                        success:function()
                        {
                            alert("下单成功");
                        }
                    })
                },
                get_alldishes:function()
                {
                    $.ajax({
                        url: "/dish",
                        type: "get",
                        context:this,
                        success:function(res, status, xhr)
                        {
                            this.dishes = res;
                        }
                    })
                },
                //增
                insert_show:function()
                {
                    this.show_flag = true;
                },
                insert_dish:function()
                {
                    this.dish.price *= 100;
                    $.ajax({
                        url: "/dish",
                        type: "post",
                        data: JSON.stringify(this.dish),
                        context:this,
                        success: function (res, status, xhr) {
                            this.get_alldishes();
                            this.show_flag = false;
                        }
                    })
                },
                //删
                delete_dish:function(dish_id)
                {
                    $.ajax({
                        url: "/dish/" + dish_id,
                        type: "delete",
                        data: JSON.stringify(this.dish),
                        context: this,
                        success: function (res, status, xhr) {
                            alert("删除成功");
                            this.get_alldishes();
                            this.show_flag = false;
                        }
                    })
                },
                //改
                update_dishes: function () {
                    this.update_flag = true;
                },
                update_dish:function(dish_id)
                {
                    //this.dish.price *= 100;
                    
                    for (i = 0; i < this.dishes.length; i++) {
                        if (this.dishes[i].id==dish_id) {
                            console.log("开始提交菜品更新，菜品ID：", dish_id);
                            console.log("待提交的菜品信息：", this.dishes[i]);
                            $.ajax({
                                url: "/dish/" + dish_id,
                                type: "put",
                                data: JSON.stringify(this.dishes[i]),
                                context: this,
                                success: function (res, status, xhr) {
                                    alert("修改成功");
                                    this.get_alldishes();
                                    this.update_flag = false;
                                },
                                error: function (xhr, status, error) {
                                    console.error("AJAX 请求失败:", error);
                                    alert("修改失败，请稍后重试");
                                }
                            })
                        }
                    }
                }
            }
        })
        myorder.get_alldishes();
    </script>
</body>

</html>